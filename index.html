<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      // 'current' current version of the visualization() api, can
      //  also use the number of the release?
      // MUST ADD MAPCHART? TO 'packages' AFTER 'corechart'
      google.charts.load('current', {'packages':['geochart']},); // * JILL - include all the packages (i.e. geochart, treemap, etc.) you'll need for the web page once, so you don't call google.charts.load multiple times ... will slow down your page
      // drawChart() set as callback function after charts are loaded (this line can be anywhere)
      google.charts.setOnLoadCallback(drawAvgChart);
      google.charts.setOnLoadCallback(drawBeerChart);



      // The entire query + response is wrapped in the two main functions,
      // drawAvgChart(), drawBeerChart(), etc. This keeps the data within the scope
      // of the function so different queries can be called in each.

      function drawAvgChart() {
        // Setup Query String (?range=A:B)
        // then add to .Query()
        var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1qUCbrw-3JScRihoOoNelSmaVfzYem-4W3EamRHk0bFg/edit?range=A:B'); // * JILL - there was a sharing query in the original URL; replaced it with range query, works fine now


        // * JILL - label the columns in your spreadsheet the way you want them to appear in the tooltip
        // Sends query request, with callback function
        query.send(handleQueryResponse);


      function handleQueryResponse(response) {
        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        // Takes data from sheets url, and converts to google's data table format
        var data = response.getDataTable();

        //JILL - added options
        var options = {
        	colorAxis: {colors: ['#f7fbff','#deebf7','#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b']} // JILL - colorbrewer is a good resource for map colors: http://colorbrewer2.org/#type=sequential&scheme=Oranges&n=3 - the more colors you specify, the more control you have, though you only need two to create a range
        };

        // INSTANTIATION
        var chart = new google.visualization.GeoChart(document.getElementById('AvgChart')); //
        chart.draw(data, options); // JILL - you were missing the options parameter here & without it you wouldn't be able to change chart type, set options, i.e. stacking, colors, etc.

      }
    }

      function drawBeerChart() {
        var queryString = encodeURIComponent('SELECT A, C');

        var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1qUCbrw-3JScRihoOoNelSmaVfzYem-4W3EamRHk0bFg/gviz/tq?gid=0&headers=1&tq=' + queryString);
        query.send(handleQueryResponse);


      function handleQueryResponse(response) {
        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        // Takes data from sheets url, and converts to google's data table format
        var data = response.getDataTable();

        //JILL - added options
        var options = {
        	colorAxis: {colors: ['#f7fbff','#deebf7','#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b']} // JILL - colorbrewer is a good resource for map colors: http://colorbrewer2.org/#type=sequential&scheme=Oranges&n=3 - the more colors you specify, the more control you have, though you only need two to create a range
        };

        // INSTANTIATION
        var chart = new google.visualization.GeoChart(document.getElementById('BeerChart')); //
        chart.draw(data, options); // JILL - you were missing the options parameter here & without it you wouldn't be able to change chart type, set options, i.e. stacking, colors, etc.

      }
    }

      </script>
  </head>
  <body>
    <h1 class="title">Countries understood with alcohol</h1>

    <!-- MAKE SURE THIS IS THE SAME AS INSTANTIATION!!!!!!!! -->
    <div class="chart" id="AvgChart"></div>
    <div class="chart" id="BeerChart"></div>
  </body>
</html>
